!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.MaskedInput=t()}}(function(){return function t(e,s,n){function r(i,a){if(!s[i]){if(!e[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var h=s[i]={exports:{}};e[i][0].call(h.exports,function(t){var s=e[i][1][t];return r(s?s:t)},h,h.exports,t,e,s,n)}return s[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(t,e,s){"use strict";var n=(window?window.React:null)||t("react"),r=t("./SelectionUtils"),o=r.getSelection,i=r.setSelection,a=t("./formatValidator"),u={9:/\d/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/},l=n.createClass({displayName:"MaskedInput",propTypes:{mask:n.PropTypes.string,format:a,translations:n.PropTypes.object,value:n.PropTypes.string,onChange:n.PropTypes.func,onKeyDown:n.PropTypes.func,onComplete:n.PropTypes.func,onFocus:n.PropTypes.func,valueLink:n.PropTypes.object},getDefaultProps:function(){return{format:"_"}},getInitialState:function(){if(null==this.props.mask)return null;this._buffer=[];for(var t=0;t<this.props.mask.length;++t)this._getPattern(t)?(null==this._firstNonMaskIdx&&(this._firstNonMaskIdx=t),this._buffer.push(this._getFormatChar(t))):this._buffer.push(this.props.mask[t]);return this._cursorPos=this._firstNonMaskIdx,{value:this._maskedValue(this._getPropsValue()||"")}},componentDidUpdate:function(){null!=this._cursorPos&&this._setSelection(this._cursorPos)},componentDidMount:function(){var t=this._getPropsValue();null!=this.props.mask&&null!=t&&this.state.value!==t&&this._callOnChange(this.state.value)},render:function(){var t;return t=null!=this.props.mask?{onChange:this._handleChange,onKeyDown:this._handleKeyDown,onFocus:this._handleFocus,value:this.state.value,valueLink:null}:{},n.createElement("input",n.__spread({},this.props,t))},_getSelection:function(){return this.isMounted()?o(this.getDOMNode()):{start:0,end:0}},_setSelection:function(t,e){null==e&&(e=t),i(this.getDOMNode(),t,e)},_getPropsValue:function(){return null!=this.props.valueLink?this.props.valueLink.value:this.props.value},_getPattern:function(t){var e=this.props.mask[t],s=this.props.translations?this.props.translations[e]:null;return s||u[e]},_getFormatChar:function(t){return t=t<this.props.format.length?t:0,this.props.format[t]},_resetBuffer:function(t,e){for(var s=t;e>s;++s)this._getPattern(s)&&(this._buffer[s]=this._getFormatChar(s))},_nextNonMaskIdx:function(t){for(var e=t+1;e<this.props.mask.length&&!this._getPattern(e);++e);return e},_prevNonMaskIdx:function(t){for(var e=t-1;e>=0&&!this._getPattern(e);--e);return e},_callOnChange:function(t){null!=this.props.valueLink?this.props.valueLink.requestChange(t):this.props.onChange&&this.props.onChange({target:{value:t}})},_callOnComplete:function(t){if(this.props.onComplete){for(var e=0;e<this.props.mask.length;++e)if(this._getPattern(e)&&this._buffer[e]===this._getFormatChar(e))return;this.props.onComplete(t)}},_setValue:function(t){t!==this.state.value&&this._callOnChange(t),this.setState({value:t})},_handleFocus:function(t){setTimeout(function(){this._setSelection(this._cursorPos)}.bind(this),0),this.props.onFocus&&this.props.onFocus(t)},_handleKeyDown:function(t){if("Backspace"===t.key||"Delete"===t.key){var e=this._getSelection(),s=e.start,n=e.end;s===n&&(s="Delete"===t.key?this._nextNonMaskIdx(s-1):this._prevNonMaskIdx(s),n=this._nextNonMaskIdx(s));var r,o=this._getPattern(s);o&&o.test(this._buffer[n])?r=this._maskedValue(this.state.value.substring(n),s):(this._resetBuffer(s,n),r=this._buffer.join("")),this._setValue(r),this._cursorPos=Math.max(s,this._firstNonMaskIdx),t.preventDefault()}this.props.onKeyDown&&this.props.onKeyDown(t)},_handleChange:function(t){var e=this._maskedValue(t.target.value);this._setValue(e),this._callOnComplete(e)},_maskedValue:function(t,e){e=e||0;for(var s=e,n=0;s<this.props.mask.length&&this._buffer[s]===t[n];++s,++n);for(var r=this._cursorPos=this._getSelection().start;s<this.props.mask.length;++s){var o=this._getPattern(s);if(o){for(this._buffer[s]=this._getFormatChar(s);n<t.length;){var i=t[n++];if(o.test(i)){this._buffer[s]=i;break}this._cursorPos>s&&this._cursorPos--}if(n>=t.length){this._resetBuffer(s+1,this.props.mask.length);break}}else r>=n&&this._cursorPos++,this._buffer[s]===t[n]&&n++}return this._buffer.join("")}});e.exports=l},{"./SelectionUtils":2,"./formatValidator":3,react:"react"}],2:[function(t,e,s){"use strict";e.exports={getSelection:function(t){var e,s;if(null!=t.setSelectionRange)e=t.selectionStart,s=t.selectionEnd;else{var n=document.selection.createRange();e=0-n.duplicate().moveStart("character",-1e5),s=e+n.text.length}return{start:e,end:s}},setSelection:function(t,e,s){if(null!=t.setSelectionRange)t.setSelectionRange(e,s);else{var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",s),n.select()}}}},{}],3:[function(t,e,s){"use strict";var n=(window?window.React:null)||t("react");e.exports=function(t,e,s){var r=n.PropTypes.string.apply(null,arguments);if(null===r&&null!=t.mask&&null!=t.format&&1!==t.format.length&&t.format.length!==t.mask.length){var o="Invalid prop `"+e+"` supplied to `"+s+"`, length must be 1 or match the length of prop `mask`.";r=new Error(o)}return r}},{react:"react"}]},{},[1])(1)});